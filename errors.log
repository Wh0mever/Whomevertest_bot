2025-01-25 04:36:01,587 - ERROR - Ошибка при получении данных поста: 'Bot' object has no attribute 'get_chat_history'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 556, in check_post_metrics_later
    messages = await bot.get_chat_history(
                     ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Bot' object has no attribute 'get_chat_history'
2025-01-25 04:53:45,279 - ERROR - Ошибка при получении данных поста: 'Bot' object has no attribute 'get_messages'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 556, in check_post_metrics_later
    message = await bot.get_messages(chat_id, message_id)
                    ^^^^^^^^^^^^^^^^
AttributeError: 'Bot' object has no attribute 'get_messages'. Did you mean: 'copy_messages'?
2025-01-25 05:05:17,510 - ERROR - Ошибка при получении данных поста: 'Bot' object has no attribute 'get_chat_message'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 556, in check_post_metrics_later
    message = await bot.get_chat_message(
                    ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Bot' object has no attribute 'get_chat_message'. Did you mean: 'pin_chat_message'?
2025-01-25 19:15:53,005 - ERROR - Ошибка при получении данных поста: 
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 560, in check_post_metrics_later
    # Получаем сообщение через Telethon
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\auth.py", line 657, in __aenter__
    return await self.start()
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\auth.py", line 165, in _start
    value = phone()
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\auth.py", line 22, in <lambda>
    phone: typing.Union[typing.Callable[[], str], str] = lambda: input('Please enter your phone (or bot token): '),
                                                                 ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
EOFError
2025-01-25 19:15:53,034 - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
2025-01-25 19:19:12,179 - ERROR - Ошибка при получении данных поста: 'NoneType' object is not iterable
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 572, in check_post_metrics_later
    reactions = sum(reaction.count for reaction in getattr(message, 'reactions', [])) if hasattr(message, 'reactions') else 0
                                                   ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not iterable
2025-01-25 19:25:39,398 - ERROR - Ошибка при проверке актуальности: check_news_actuality() takes 3 positional arguments but 4 were given
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 478, in handle_channel_post
    is_actual, news_details = await check_news_actuality(
                                    ~~~~~~~~~~~~~~~~~~~~^
        message.text,
        ^^^^^^^^^^^^^
    ...<2 lines>...
        local_time_str  # Передаём локальное время в строковом формате
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: check_news_actuality() takes 3 positional arguments but 4 were given
2025-01-25 19:26:39,419 - ERROR - Ошибка при проверке метрик поста 166 из канала @lalalgogo: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 562, in check_post_metrics_later
    async with TelegramClient('bot_session', CONFIG["API_ID"], CONFIG["API_HASH"]).start(bot_token=CONFIG["API_TOKEN"]) as client:
               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object does not support the asynchronous context manager protocol
2025-01-25 19:28:22,507 - ERROR - Ошибка при проверке актуальности: check_news_actuality() takes 3 positional arguments but 4 were given
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 478, in handle_channel_post
    is_actual, news_details = await check_news_actuality(
                                    ~~~~~~~~~~~~~~~~~~~~^
        message.text,
        ^^^^^^^^^^^^^
    ...<2 lines>...
        local_time_str  # Передаём локальное время в строковом формате
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: check_news_actuality() takes 3 positional arguments but 4 were given
2025-01-25 20:07:52,133 - ERROR - Ошибка при запросе к GPT: object ChatCompletion can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 615, in get_gpt_response
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
TypeError: object ChatCompletion can't be used in 'await' expression
2025-01-25 20:07:52,136 - ERROR - Ошибка при обработке поста: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 472, in handle_channel_post
    is_actual, news_details = await check_news_actuality(
    ^^^^^^^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)
2025-01-25 20:23:54,063 - ERROR - Ошибка при запросе к GPT: object ChatCompletion can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 615, in get_gpt_response
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
TypeError: object ChatCompletion can't be used in 'await' expression
2025-01-25 20:23:54,064 - ERROR - Ошибка при обработке поста: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 472, in handle_channel_post
    is_actual, news_details = await check_news_actuality(
    ^^^^^^^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)
2025-01-25 20:26:41,286 - ERROR - Ошибка при обработке поста: name 'check_content_moderation' is not defined
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 387, in handle_channel_post
    moderation_result = await check_content_moderation(message.text)
                              ^^^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'check_content_moderation' is not defined
2025-01-25 20:29:30,499 - ERROR - Ошибка при проверке контента: Expecting value: line 1 column 1 (char 0)
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\utils\checks.py", line 294, in check_content_moderation
    result = json.loads(response)
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\decoder.py", line 344, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\decoder.py", line 362, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
2025-01-25 20:29:53,396 - ERROR - Ошибка при проверке метрик поста 171 из канала -1002472997649: 'NoneType' object is not iterable
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 495, in check_post_metrics_later
    reactions = sum(reaction.count for reaction in getattr(message, 'reactions', [])) if hasattr(message, 'reactions') else 0
                                                   ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not iterable
2025-01-25 20:30:31,263 - ERROR - Ошибка при проверке метрик поста 172 из канала -1002472997649: 'NoneType' object is not iterable
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 495, in check_post_metrics_later
    reactions = sum(reaction.count for reaction in getattr(message, 'reactions', [])) if hasattr(message, 'reactions') else 0
                                                   ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'NoneType' object is not iterable
2025-01-25 21:29:21,402 - ERROR - Ошибка при запросе к GPT: object ChatCompletion can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 566, in get_gpt_response
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<7 lines>...
    )
    ^
TypeError: object ChatCompletion can't be used in 'await' expression
2025-01-25 22:25:17,567 - ERROR - Ошибка при проверке поста 182: 'Bot' object has no attribute 'get_message'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 488, in check_post_metrics_later
    message = await bot.get_message(chat_id, message_id)
                    ^^^^^^^^^^^^^^^
AttributeError: 'Bot' object has no attribute 'get_message'. Did you mean: 'send_message'?
2025-01-25 22:40:56,087 - ERROR - Ошибка при проверке поста 184: 'METRICS_CHECK_DELAY'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 538, in check_post_metrics_later
    CONFIG["METRICS_CHECK_DELAY"],
    ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'METRICS_CHECK_DELAY'
2025-01-25 23:45:33,485 - ERROR - Ошибка при проверке поста 185: 'MessageReactions' object is not iterable
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 572, in check_post_metrics_later
    reactions = sum(reaction.count for reaction in getattr(message, 'reactions', []) or [])
                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'MessageReactions' object is not iterable
2025-01-25 23:45:42,072 - ERROR - Ошибка при проверке поста 186: 'MessageReactions' object is not iterable
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 572, in check_post_metrics_later
    reactions = sum(reaction.count for reaction in getattr(message, 'reactions', []) or [])
                                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'MessageReactions' object is not iterable
2025-01-25 23:57:14,189 - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2706)
2025-01-25 23:57:33,513 - ERROR - Ошибка при обработке поста: '-1002472997649'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 414, in handle_channel_post
    channels[chat_id]["subscribers"]
    ~~~~~~~~^^^^^^^^^
KeyError: '-1002472997649'
2025-01-26 00:04:23,660 - ERROR - Ошибка при выводе статистики: 'timezone'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 335, in stats_command
    f"🕒 Часовой пояс: {data['timezone']:+.2f}\n"
                        ~~~~^^^^^^^^^^^^
KeyError: 'timezone'
2025-01-26 00:04:33,546 - ERROR - Ошибка при выводе статистики: 'timezone'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 335, in stats_command
    f"🕒 Часовой пояс: {data['timezone']:+.2f}\n"
                        ~~~~^^^^^^^^^^^^
KeyError: 'timezone'
2025-01-26 00:04:48,936 - ERROR - Ошибка при управлении каналом: 'is_news'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 230, in manage_channel
    text=f"📰 Новостной канал: {'✅' if channel_data['is_news'] else '❌'}",
                                        ~~~~~~~~~~~~^^^^^^^^^^^
KeyError: 'is_news'
2025-01-26 00:05:45,798 - ERROR - Ошибка при сохранении данных в channels.json: Object of type GetChatMemberCount is not JSON serializable
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\utils\database.py", line 22, in save_json
    json.dump(data, f, indent=4, ensure_ascii=False)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 179, in dump
    for chunk in iterable:
                 ^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 439, in _iterencode
    o = _default(o)
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type GetChatMemberCount is not JSON serializable
2025-01-26 00:05:45,809 - ERROR - Ошибка при получении информации о канале @lalalgogo: unsupported format string passed to GetChatMemberCount.__format__
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 177, in process_channel_with_timezone
    f"👥 Подписчиков: {chat_info:,}"
                      ^^^^^^^^^^^^^
TypeError: unsupported format string passed to GetChatMemberCount.__format__
2025-01-26 00:06:54,488 - ERROR - Ошибка при выводе статистики: 'timezone'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 335, in stats_command
    f"🕒 Часовой пояс: {data['timezone']:+.2f}\n"
                        ~~~~^^^^^^^^^^^^
KeyError: 'timezone'
2025-01-26 00:06:59,852 - ERROR - Ошибка при управлении каналом: unsupported format string passed to GetChatMemberCount.__format__
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 240, in manage_channel
    f"👥 Подписчиков: {channel_data['subscribers']:,}",
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: unsupported format string passed to GetChatMemberCount.__format__
2025-01-26 01:25:26,357 - ERROR - Ошибка при проверке контента: object ChatCompletion can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\utils\checks.py", line 335, in check_content_moderation
    response = await client.chat.completions.create(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
TypeError: object ChatCompletion can't be used in 'await' expression
2025-01-26 01:26:27,254 - ERROR - Ошибка при проверке метрик: Cannot find any entity corresponding to "-1002472997649"
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 481, in check_post_metrics_later
    message = await client.get_messages(chat_id, ids=message_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\messages.py", line 599, in get_messages
    async for message in it:
    ...<3 lines>...
        return None
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\requestiter.py", line 58, in __anext__
    if await self._init(**self.kwargs):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\messages.py", line 289, in _init
    self._entity = (await self.client.get_input_entity(entity)) if entity else None
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\users.py", line 440, in get_input_entity
    await self._get_entity_from_string(peer))
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\users.py", line 577, in _get_entity_from_string
    raise ValueError(
        'Cannot find any entity corresponding to "{}"'.format(string)
    )
ValueError: Cannot find any entity corresponding to "-1002472997649"
2025-01-26 02:03:51,813 - ERROR - Ошибка при проверке контента: Expecting value: line 1 column 1 (char 0)
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\utils\checks.py", line 316, in check_content_moderation
    return json.loads(response.choices[0].message.content)
           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\decoder.py", line 344, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\decoder.py", line 362, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
2025-01-26 02:03:51,831 - ERROR - Ошибка при проверке метрик: 'Bot' object has no attribute 'get_message'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 469, in check_post_metrics_later
    message = await bot.get_message(
                    ^^^^^^^^^^^^^^^
AttributeError: 'Bot' object has no attribute 'get_message'. Did you mean: 'send_message'?
2025-01-26 02:05:32,341 - ERROR - Ошибка при управлении каналом: 'is_news'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 231, in manage_channel
    text=f"📰 Новостной канал: {'✅' if channel_data['is_news'] else '❌'}",
                                        ~~~~~~~~~~~~^^^^^^^^^^^
KeyError: 'is_news'
2025-01-26 02:06:50,827 - ERROR - Ошибка при проверке контента: Expecting value: line 1 column 1 (char 0)
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\utils\checks.py", line 316, in check_content_moderation
    "spelling": boolean,
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\decoder.py", line 344, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\decoder.py", line 362, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
2025-01-26 02:06:50,830 - ERROR - Ошибка при проверке метрик: 'Bot' object has no attribute 'get_message'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 469, in check_post_metrics_later
    message = await bot.get_chat_message(
                    ^^^^^^^^^^^^^^^
AttributeError: 'Bot' object has no attribute 'get_message'. Did you mean: 'send_message'?
2025-01-26 02:07:07,399 - ERROR - Ошибка при проверке метрик: 'Bot' object has no attribute 'get_chat_message'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 469, in check_post_metrics_later
    message = await bot.get_chat_message(
                    ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Bot' object has no attribute 'get_chat_message'. Did you mean: 'pin_chat_message'?
2025-01-26 02:08:04,635 - ERROR - Ошибка при проверке метрик: 'Bot' object has no attribute 'get_messages'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 469, in check_post_metrics_later
    message = await bot.get_messages(
                    ^^^^^^^^^^^^^^^^
AttributeError: 'Bot' object has no attribute 'get_messages'. Did you mean: 'copy_messages'?
2025-01-26 02:08:55,913 - ERROR - Ошибка при проверке метрик: Cannot find any entity corresponding to "-1002472997649"
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 472, in check_post_metrics_later
    message = await client.get_messages(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
    )
    ^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\messages.py", line 599, in get_messages
    async for message in it:
    ...<3 lines>...
        return None
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\requestiter.py", line 58, in __anext__
    if await self._init(**self.kwargs):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\messages.py", line 289, in _init
    self._entity = (await self.client.get_input_entity(entity)) if entity else None
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\users.py", line 440, in get_input_entity
    await self._get_entity_from_string(peer))
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\users.py", line 577, in _get_entity_from_string
    raise ValueError(
        'Cannot find any entity corresponding to "{}"'.format(string)
    )
ValueError: Cannot find any entity corresponding to "-1002472997649"
2025-01-26 02:10:56,286 - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2706)
2025-01-26 02:13:39,164 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-13' coro=<check_post_metrics_later() done, defined at C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py:466> exception=EOFError()>
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 476, in check_post_metrics_later
    async with TelegramClient(session_name, CONFIG["API_ID"], CONFIG["API_HASH"]) as client:
               ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\auth.py", line 657, in __aenter__
    return await self.start()
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\auth.py", line 187, in _start
    value = code_callback()
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\auth.py", line 102, in code_callback
    return input('Please enter the code you received: ')
EOFError
2025-01-26 02:17:07,231 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-37' coro=<check_post_metrics_later() done, defined at C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py:466> exception=TypeError("'MessageReactions' object is not iterable")>
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 496, in check_post_metrics_later
    reactions = sum(reaction.count for reaction in message.reactions)
                                                   ^^^^^^^^^^^^^^^^^
TypeError: 'MessageReactions' object is not iterable
2025-01-26 02:20:41,355 - ERROR - Task exception was never retrieved
future: <Task finished name='Task-68' coro=<check_post_metrics_later() done, defined at C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py:466> exception=TypeError("'MessageReactions' object is not iterable")>
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 496, in check_post_metrics_later
    if hasattr(message, 'reactions') and message.reactions:
                                                       ^^^^
TypeError: 'MessageReactions' object is not iterable
2025-01-26 02:21:26,136 - ERROR - Ошибка при проверке метрик: Cannot get entity by phone number as a bot (try using integer IDs, not strings)
Traceback (most recent call last):
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\users.py", line 532, in _get_entity_from_string
    for user in (await self(
                 ^^^^^^^^^^^
            functions.contacts.GetContactsRequest(0))).users:
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\users.py", line 30, in __call__
    return await self._call(self._sender, request, ordered=ordered)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\users.py", line 87, in _call
    result = await future
             ^^^^^^^^^^^^
telethon.errors.rpcerrorlist.BotMethodInvalidError: The API access for bot users is restricted. The method you tried to invoke cannot be executed as a bot (caused by GetContactsRequest)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 486, in check_post_metrics_later
    message = await client.get_messages(chat_id, ids=message_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\messages.py", line 599, in get_messages
    async for message in it:
    ...<3 lines>...
        return None
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\requestiter.py", line 58, in __anext__
    if await self._init(**self.kwargs):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\messages.py", line 289, in _init
    self._entity = (await self.client.get_input_entity(entity)) if entity else None
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\users.py", line 440, in get_input_entity
    await self._get_entity_from_string(peer))
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\users.py", line 537, in _get_entity_from_string
    raise ValueError('Cannot get entity by phone number as a '
                     'bot (try using integer IDs, not strings)')
ValueError: Cannot get entity by phone number as a bot (try using integer IDs, not strings)
2025-01-26 02:23:20,845 - ERROR - Ошибка при проверке метрик: Could not find the input entity for PeerUser(user_id=2472997649) (PeerUser). Please read https://docs.telethon.dev/en/stable/concepts/entities.html to find out more details.
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 475, in check_post_metrics_later
    message = await client.get_messages(numeric_chat_id, ids=message_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\messages.py", line 599, in get_messages
    async for message in it:
    ...<3 lines>...
        return None
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\requestiter.py", line 58, in __anext__
    if await self._init(**self.kwargs):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\messages.py", line 289, in _init
    self._entity = (await self.client.get_input_entity(entity)) if entity else None
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\telethon\client\users.py", line 469, in get_input_entity
    raise ValueError(
    ...<4 lines>...
    )
ValueError: Could not find the input entity for PeerUser(user_id=2472997649) (PeerUser). Please read https://docs.telethon.dev/en/stable/concepts/entities.html to find out more details.
2025-01-26 02:26:14,051 - ERROR - Ошибка при проверке метрик: notify_admins() takes 2 positional arguments but 7 were given
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 502, in check_post_metrics_later
    await notify_admins(
          ~~~~~~~~~~~~~^
        chat_id,
        ^^^^^^^^
    ...<5 lines>...
        is_news
        ^^^^^^^
    )
    ^
TypeError: notify_admins() takes 2 positional arguments but 7 were given
2025-01-26 02:32:39,894 - ERROR - Ошибка при проверке метрик: too many values to unpack (expected 2)
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 495, in check_post_metrics_later
    has_errors, error_details = await check_content_moderation(text)
    ^^^^^^^^^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)
2025-01-26 02:33:26,169 - ERROR - Ошибка при обработке поста: -1002472997649
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 403, in handle_channel_post
    await notify_admins(channel_data,
          ^^^^^^^^^^^^^
NameError: name 'notify_admins' is not defined
2025-01-26 02:42:24,549 - ERROR - Ошибка при проверке текста через OpenAI: object ChatCompletion can't be used in 'await' expression
2025-01-26 02:42:24,550 - ERROR - Ошибка при обработке поста: -1002472997649
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 402, in handle_channel_post
    if content_check["has_errors"]:
       ~~~~~~~~~~~~~^^^^^^^^^^^^^^
TypeError: tuple indices must be integers or slices, not str
2025-01-26 02:43:49,663 - ERROR - Ошибка при обработке поста: -1002472997649
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 402, in handle_channel_post
    if content_check["has_errors"]:
       ~~~~~~~~~~~~~^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not subscriptable
2025-01-26 02:58:49,655 - ERROR - Ошибка при проверке текста через OpenAI: Expecting value: line 1 column 1 (char 0)
2025-01-26 02:58:49,655 - ERROR - Ошибка при отправке уведомлений: 'str' object has no attribute 'get'
2025-01-26 02:59:07,119 - ERROR - Ошибка при проверке текста через OpenAI: Expecting value: line 1 column 1 (char 0)
2025-01-26 02:59:07,119 - ERROR - Ошибка при отправке уведомлений: 'str' object has no attribute 'get'
2025-01-26 02:59:11,289 - ERROR - Ошибка при проверке текста через OpenAI: Expecting value: line 1 column 1 (char 0)
2025-01-26 02:59:11,289 - ERROR - Ошибка при отправке уведомлений: 'str' object has no attribute 'get'
2025-01-26 02:59:18,537 - ERROR - Ошибка при проверке текста через OpenAI: Expecting value: line 1 column 1 (char 0)
2025-01-26 02:59:18,538 - ERROR - Ошибка при отправке уведомлений: 'str' object has no attribute 'get'
2025-01-26 03:08:58,902 - ERROR - Ошибка при обработке поста: -1002472997649
2025-01-26 03:08:58,902 - ERROR - 'coroutine' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 397, in handle_channel_post
    if content_check.get("has_errors", False):
       ^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'get'
2025-01-26 03:11:50,731 - ERROR - Ошибка при обработке поста: -1002472997649
2025-01-26 03:11:50,731 - ERROR - 'coroutine' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 399, in handle_channel_post
    if content_check.get("has_errors", False):
       ^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'get'
2025-01-26 03:12:18,102 - ERROR - Ошибка при обработке поста: -1002472997649
2025-01-26 03:12:18,103 - ERROR - 'coroutine' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 399, in handle_channel_post
    if content_check.get("has_errors", False):
       ^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'get'
2025-01-26 03:13:07,854 - ERROR - Ошибка при обработке поста: -1002472997649
2025-01-26 03:13:07,854 - ERROR - 'coroutine' object has no attribute 'get'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 398, in handle_channel_post
    if content_check.get("has_errors", False):
       ^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'get'
2025-01-26 03:25:48,246 - ERROR - Ошибка при отправке уведомлений: 'str' object has no attribute 'get'
2025-01-26 03:27:19,934 - ERROR - Ошибка при сохранении данных в channels.json: Object of type GetChatMemberCount is not JSON serializable
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\utils\database.py", line 22, in save_json
    json.dump(data, f, indent=4, ensure_ascii=False)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 179, in dump
    for chunk in iterable:
                 ^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 439, in _iterencode
    o = _default(o)
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type GetChatMemberCount is not JSON serializable
2025-01-26 03:27:19,947 - ERROR - Ошибка при получении информации о канале @lalalgogo: unsupported format string passed to GetChatMemberCount.__format__
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 179, in process_channel_with_timezone
    f"👥 Подписчиков: {chat_info:,}"
                      ^^^^^^^^^^^^^
TypeError: unsupported format string passed to GetChatMemberCount.__format__
2025-01-26 03:27:33,822 - ERROR - Ошибка при сохранении данных в channels.json: Object of type GetChatMemberCount is not JSON serializable
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\utils\database.py", line 22, in save_json
    json.dump(data, f, indent=4, ensure_ascii=False)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 179, in dump
    for chunk in iterable:
                 ^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 439, in _iterencode
    o = _default(o)
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type GetChatMemberCount is not JSON serializable
2025-01-26 03:27:33,823 - ERROR - Ошибка при получении информации о канале @iccupp: unsupported format string passed to GetChatMemberCount.__format__
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 179, in process_channel_with_timezone
    f"👥 Подписчиков: {chat_info:,}"
                      ^^^^^^^^^^^^^
TypeError: unsupported format string passed to GetChatMemberCount.__format__
2025-01-26 03:28:03,124 - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [WinError 121] Превышен таймаут семафора
2025-01-26 03:30:04,814 - ERROR - Ошибка при выводе статистики: unsupported format string passed to GetChatMemberCount.__format__
2025-01-26 03:30:07,798 - ERROR - Ошибка при управлении каналом: unsupported format string passed to GetChatMemberCount.__format__
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 242, in manage_channel
    f"👥 Подписчиков: {channel_data['subscribers']:,}",
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: unsupported format string passed to GetChatMemberCount.__format__
2025-01-26 03:32:47,667 - ERROR - Канал -1002472997649 не найден в базе
2025-01-26 03:33:49,346 - ERROR - Ошибка при сохранении данных в channels.json: Object of type GetChatMemberCount is not JSON serializable
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\utils\database.py", line 22, in save_json
    json.dump(data, f, indent=4, ensure_ascii=False)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 179, in dump
    for chunk in iterable:
                 ^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 439, in _iterencode
    o = _default(o)
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type GetChatMemberCount is not JSON serializable
2025-01-26 03:33:49,348 - ERROR - Ошибка при получении информации о канале @lalalgogo: unsupported format string passed to GetChatMemberCount.__format__
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 179, in process_channel_with_timezone
    f"👥 Подписчиков: {chat_info:,}"
                      ^^^^^^^^^^^^^
TypeError: unsupported format string passed to GetChatMemberCount.__format__
2025-01-26 03:34:12,487 - ERROR - Ошибка при сохранении данных в channels.json: Object of type GetChatMemberCount is not JSON serializable
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\utils\database.py", line 22, in save_json
    json.dump(data, f, indent=4, ensure_ascii=False)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 179, in dump
    for chunk in iterable:
                 ^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 432, in _iterencode
    yield from _iterencode_dict(o, _current_indent_level)
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 406, in _iterencode_dict
    yield from chunks
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 439, in _iterencode
    o = _default(o)
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                    f'is not JSON serializable')
TypeError: Object of type GetChatMemberCount is not JSON serializable
2025-01-26 03:34:12,489 - ERROR - Ошибка при получении информации о канале @lalalgogo: unsupported format string passed to GetChatMemberCount.__format__
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 179, in process_channel_with_timezone
    f"👥 Подписчиков: {chat_info:,}"
                      ^^^^^^^^^^^^^
TypeError: unsupported format string passed to GetChatMemberCount.__format__
2025-01-26 03:38:31,216 - ERROR - Ошибка при добавлении канала: process_channel_with_timezone() missing 1 required positional argument: 'timezone'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 395, in process_channel_addition
    await process_channel_with_timezone(message, message.text)
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
TypeError: process_channel_with_timezone() missing 1 required positional argument: 'timezone'
2025-01-26 03:40:56,766 - ERROR - Канал -1002472997649 не найден в базе
2025-01-26 03:42:51,762 - ERROR - Ошибка при обработке поста: check_news_actuality() missing 1 required positional argument: 'date'
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 375, in handle_channel_post
    news_check = await check_news_actuality(message.text)
                       ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
TypeError: check_news_actuality() missing 1 required positional argument: 'date'
2025-01-26 03:45:48,329 - ERROR - Ошибка при проверке актуальности: can't subtract offset-naive and offset-aware datetimes
2025-01-26 03:51:32,067 - ERROR - Ошибка при проверке актуальности: object ChatCompletion can't be used in 'await' expression
2025-01-26 04:06:00,408 - ERROR - Ошибка при проверке актуальности: Error code: 404 - {'error': {'message': 'This is not a chat model and thus not supported in the v1/chat/completions endpoint. Did you mean to use v1/completions?', 'type': 'invalid_request_error', 'param': 'model', 'code': None}}
2025-01-26 06:12:52,739 - ERROR - Ошибка при проверке актуальности: 'GOOGLE_SEARCH_API_KEY'
2025-01-26 06:16:47,876 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 06:32:00,223 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 06:32:30,914 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 06:32:51,306 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 08:18:00,512 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 08:19:47,807 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 08:21:44,631 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 08:22:08,578 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 08:22:48,517 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 08:24:43,126 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 08:42:06,068 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 14:48:01,899 - ERROR - Канал -1002004224282 не найден в базе
2025-01-26 14:48:01,899 - ERROR - Канал -1002004224282 не найден в базе
2025-01-26 14:48:01,900 - ERROR - Канал -1002004224282 не найден в базе
2025-01-26 14:48:01,900 - ERROR - Канал -1002004224282 не найден в базе
2025-01-26 14:48:01,901 - ERROR - Канал -1002004224282 не найден в базе
2025-01-26 14:48:01,901 - ERROR - Канал -1002004224282 не найден в базе
2025-01-26 14:48:01,901 - ERROR - Канал -1002004224282 не найден в базе
2025-01-26 14:48:01,902 - ERROR - Канал -1002245791208 не найден в базе
2025-01-26 14:48:01,902 - ERROR - Канал -1001870961723 не найден в базе
2025-01-26 14:48:01,902 - ERROR - Канал -1001992998622 не найден в базе
2025-01-26 14:48:01,903 - ERROR - Канал -1002034227467 не найден в базе
2025-01-26 14:49:14,093 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 14:50:26,402 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 14:52:44,449 - ERROR - Ошибка при добавлении канала: Telegram server says - Bad Request: chat not found
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\bot.py", line 450, in process_channel_addition
    chat = await bot.get_chat(channel_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 1665, in get_chat
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\bot.py", line 498, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\aiohttp.py", line 189, in make_request
    response = self.check_response(
        bot=bot, method=method, status_code=resp.status, content=raw_result
    )
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2025-01-26 14:54:57,027 - ERROR - Ошибка при получении метрик поста 13 из канала -1002374541033: Cannot send requests while disconnected
2025-01-26 14:57:50,882 - ERROR - Ошибка при получении метрик поста 14 из канала -1002374541033: Cannot find any entity corresponding to "-1002374541033"
2025-01-26 15:00:40,843 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 15:02:41,152 - ERROR - Ошибка при получении метрик поста 15 из канала -1002374541033: Cannot find any entity corresponding to "-1002374541033"
2025-01-26 15:10:12,888 - ERROR - Канал -1001992394212 не найден в базе
2025-01-26 15:10:12,889 - ERROR - Канал -1001992394212 не найден в базе
2025-01-26 15:15:32,917 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 15:21:08,515 - ERROR - Ошибка при получении метрик поста 16 из канала -1002374541033: Cannot find any entity corresponding to "-1002374541033"
2025-01-26 15:24:32,555 - ERROR - Ошибка при получении метрик поста 17 из канала -1002374541033: Cannot find any entity corresponding to "-1002374541033"
2025-01-26 15:29:08,217 - ERROR - Ошибка при получении метрик поста 18 из канала -1002374541033: Cannot find any entity corresponding to "-1002374541033"
2025-01-26 15:30:41,931 - ERROR - Ошибка при получении метрик поста 20 из канала -1002374541033: Cannot find any entity corresponding to "-1002374541033"
2025-01-26 15:34:48,688 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 15:36:11,075 - ERROR - Ошибка при получении метрик поста 21 из канала -1002374541033: Cannot find any entity corresponding to "-1002374541033"
2025-01-26 15:40:05,392 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 15:41:24,016 - ERROR - Ошибка при получении метрик поста 23 из канала -1002374541033: Cannot find any entity corresponding to "-1002374541033"
2025-01-26 15:41:29,949 - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [WinError 10054] Удаленный хост принудительно разорвал существующее подключение
2025-01-26 15:41:41,264 - ERROR - Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
2025-01-26 15:41:41,400 - ERROR - Ошибка при получении метрик поста 24 из канала -1002374541033: Cannot find any entity corresponding to "-1002374541033"
2025-01-26 15:47:24,727 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 16:59:19,042 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 18:34:15,526 - ERROR - Канал -1002472997649 не найден в конфигурации
2025-01-26 18:36:59,638 - ERROR - Ошибка при получении метрик поста 25 из канала -1002374541033: Cannot find any entity corresponding to "-1002374541033"
2025-01-26 18:38:45,713 - ERROR - Ошибка при получении метрик поста 26 из канала -1002374541033: Cannot find any entity corresponding to "-1002374541033"
2025-01-26 18:50:57,735 - ERROR - Канал -1002245791208 не найден в базе
2025-01-26 18:53:15,081 - ERROR - Канал -1001992998622 не найден в базе
2025-01-26 18:55:36,062 - ERROR - Канал -1001870961723 не найден в базе
2025-01-26 19:10:12,931 - ERROR - Канал -1001992394212 не найден в базе
2025-01-26 20:44:32,226 - ERROR - Ошибка при отправке уведомлений: 'str' object has no attribute 'message_id'
2025-01-26 20:47:17,790 - ERROR - Канал -1001870961723 не найден в базе
2025-01-26 20:47:28,648 - ERROR - Канал -1001992998622 не найден в базе
2025-01-26 20:50:24,783 - ERROR - Канал -1002453813682 не найден в базе
2025-01-26 20:51:27,314 - ERROR - Канал -1002453813682 не найден в базе
2025-01-26 22:06:46,765 - ERROR - Канал -1001992998622 не найден в базе
2025-01-26 22:06:46,766 - ERROR - Канал -1001992998622 не найден в базе
2025-01-26 22:06:46,766 - ERROR - Канал -1001992998622 не найден в базе
2025-01-26 22:06:46,767 - ERROR - Канал -1001992998622 не найден в базе
2025-01-26 22:42:25,247 - ERROR - Канал -1002245791208 не найден в базе
2025-01-26 22:44:31,253 - ERROR - Канал -1001870961723 не найден в базе
2025-01-27 00:29:51,352 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:29:55,471 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:29:56,590 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:01,088 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:02,494 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:07,312 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:09,137 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:14,548 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:17,110 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:20,231 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:23,765 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:27,882 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:32,327 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:37,436 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:42,452 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:47,494 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:52,563 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:30:57,707 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:31:02,783 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-27 00:31:07,868 - ERROR - Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: terminated by other getUpdates request; make sure that only one bot instance is running
2025-01-31 02:20:17,110 - ERROR - Ошибка при получении новостей: Invalid variable type: value should be str, int or float, got None of type <class 'NoneType'>
Traceback (most recent call last):
  File "C:\Users\Asus\OneDrive\Рабочий стол\OpenAI\telegram_channel_tracker\telegram_channel_tracker1\utils\api.py", line 65, in get_news_by_text
    async with session.get('https://news.yandex.ru/api/v1/search', params=yandex_params) as response:
               ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiohttp\client.py", line 1360, in __aenter__
    self._resp: _RetType = await self._coro
                           ^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiohttp\client.py", line 635, in _request
    req = self._request_class(
        method,
    ...<21 lines>...
        trust_env=self.trust_env,
    )
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\aiohttp\client_reqrep.py", line 314, in __init__
    url = url.extend_query(params)
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\yarl\_url.py", line 1178, in extend_query
    if not (new_query := get_str_query(*args, **kwargs)):
                         ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\yarl\_query.py", line 101, in get_str_query
    return get_str_query_from_sequence_iterable(query.items())
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\yarl\_query.py", line 55, in get_str_query_from_sequence_iterable
    f"{quoter(k)}={quoter(v if type(v) is str else query_var(v))}"
                                                   ~~~~~~~~~^^^
  File "C:\Users\Asus\AppData\Local\Programs\Python\Python313\Lib\site-packages\yarl\_query.py", line 37, in query_var
    raise TypeError(
    ...<3 lines>...
    )
TypeError: Invalid variable type: value should be str, int or float, got None of type <class 'NoneType'>
